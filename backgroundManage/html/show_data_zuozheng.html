<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <meta name="renderer" content="webkit">
    <title>佐证信息审核统计</title>
    <link rel="stylesheet" href="../css/pintuer.css">
    <link rel="stylesheet" href="../css/admin.css">
    <link rel="stylesheet" href="../css/pagination.css">
    <!--<link rel="stylesheet" href="../css/inputStyle.css">-->
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="../css/reset.min.css">
    <link rel="stylesheet" href="../css/xiangqing.css">
    <!--<script src="../js/commer.js"></script>-->
    <script src="../js/jquery.js"></script>
    <script src="../js/pintuer.js"></script>
    <script src="../js/inputJavaScript.js"></script>
    <script src="../js/jquery.pagination.js"></script>
    <script src="../js/xiangqing.js"></script>
    <script src="../js/config.js"></script>
    <script src="../js/bootstrap.min.js"></script>
    <script src="../js/jquery.cookie.js"></script>
    <script src="../js/common.js"></script>
    <script src="../js/formReset.js"></script>
    <style>
        .active{background: #70c1ff!important;color: #fff!important;border-radius: 12px;}
        .form-01 dt{
            height: 30px;
            line-height: 30px;
            float: left;
            margin-right: 10px;
            border-radius: 12px;
            text-align: center;
            padding: 2px 6px;
            cursor: pointer;
            position: relative;
            color: #555;
        }
        .form-01 #formSubmit2 tr td{
            height:auto;
        }
        .xiangqing ul li{
            width: 120px;
            height: 45px;
            background: blueviolet;
            float:left
        }
        .xiangqing table{
            width: 100%;
        }
        .xiangqing tr {
            width: 100%;
        }
        .xiangqing tr td{
            width: 10%;
        }
        .xiangqing tr td span{
            color:#959595;
            font-size: 12px;
        }
        .table-bg{background: #F7F7F7;height:30px;line-height: 30px;}
        /*上传文件弹出框样式*/
        .pop-up{
            position:fixed;
            top:50%;
            left:50%;
            transform: translate(-50%,-50%);
            width:500px;
            height:300px;
            background: #f5f5f5;
            border-radius: 4px;
            z-index: 999;
            border:1px solid #ccc;
            display: none;
        }
        .pop-up .container{
            width:100%;
            height:100%;
        }
        .pop-up .container h3{
            text-align: center;
            height:60px;
            line-height: 60px;
        }
        .pop-up .inputs{
            width:100%;
            height: 100px;
            background: #fff;
            position:relative;
            border:1px dashed #ccc;
        }
        .pop-up .inputs #upfile{
            position:absolute;
            top:50%;
            left:50%;
            transform: translate(-50%,-50%);
        }
        .pop-up .container .inputs input{
            width: 170px;
        }
        .pop-up .container .geshi{
            width:100%;
            text-align: center;
            margin-top: 20px;
            font-size: 12px;
        }
        .pop-up .container .geshi button{
            width:50px;
            height:24px;
            border-radius: 4px;
            background: #f0ad4e;
            border: 1px solid #FFAC37;
            color:#fff;
        }
        .pop-up .closes{
            font-size:22px;
            float: right;
            margin-right:14px;
            cursor: pointer;
        }
        .btn_orange{color: #fff;
            background: #f0ad4e;
            border: 1px solid #FFAC37;
            width: 50px;
            text-align: center;
            margin-right: 13px;
            text-indent: 0;
            padding: 3px 0;
            border-radius: 3px;
            vertical-align: middle;
        }
        .panel>.form-01>.search div{width: 100%;}

        /*加载动画*/
        .spinner {
            margin: 5% auto;
            width: 80px;
            height: 80px;
            position: relative;
        }

        .container1 > div, .container2 > div, .container3 > div {
            width: 14px;
            height: 14px;
            background-color: #858585;
            border-radius: 100%;
            position: absolute;
            -webkit-animation: bouncedelay 1.2s infinite ease-in-out;
            animation: bouncedelay 1.2s infinite ease-in-out;
            -webkit-animation-fill-mode: both;
            animation-fill-mode: both;
        }

        .spinner .spinner-container {
            position: absolute;
            width: 100%;
            height: 100%;
        }

        .container2 {
            -webkit-transform: rotateZ(45deg);
            transform: rotateZ(45deg);
        }

        .container3 {
            -webkit-transform: rotateZ(90deg);
            transform: rotateZ(90deg);
        }

        .circle1 { top: 0; left: 0; }
        .circle2 { top: 0; right: 0; }
        .circle3 { right: 0; bottom: 0; }
        .circle4 { left: 0; bottom: 0; }

        .container2 .circle1 {
            -webkit-animation-delay: -1.1s;
            animation-delay: -1.1s;
        }

        .container3 .circle1 {
            -webkit-animation-delay: -1.0s;
            animation-delay: -1.0s;
        }

        .container1 .circle2 {
            -webkit-animation-delay: -0.9s;
            animation-delay: -0.9s;
        }

        .container2 .circle2 {
            -webkit-animation-delay: -0.8s;
            animation-delay: -0.8s;
        }

        .container3 .circle2 {
            -webkit-animation-delay: -0.7s;
            animation-delay: -0.7s;
        }

        .container1 .circle3 {
            -webkit-animation-delay: -0.6s;
            animation-delay: -0.6s;
        }

        .container2 .circle3 {
            -webkit-animation-delay: -0.5s;
            animation-delay: -0.5s;
        }

        .container3 .circle3 {
            -webkit-animation-delay: -0.4s;
            animation-delay: -0.4s;
        }

        .container1 .circle4 {
            -webkit-animation-delay: -0.3s;
            animation-delay: -0.3s;
        }

        .container2 .circle4 {
            -webkit-animation-delay: -0.2s;
            animation-delay: -0.2s;
        }

        .container3 .circle4 {
            -webkit-animation-delay: -0.1s;
            animation-delay: -0.1s;
        }

        @-webkit-keyframes bouncedelay {
            0%, 80%, 100% { -webkit-transform: scale(0.0) }
            40% { -webkit-transform: scale(1.0) }
        }

        @keyframes bouncedelay {
            0%, 80%, 100% {
                transform: scale(0.0);
                -webkit-transform: scale(0.0);
            } 40% {
                  transform: scale(1.0);
                  -webkit-transform: scale(1.0);
              }
        }
    </style>
</head>
<body>
<!--上传文件弹出框-->
<div class="pop-up">
    <div class="closes"><strong>×</strong></div>
    <div class="container">
        <h3>导入Excel</h3>
        <!--<span>上&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;传：</span>-->
        <div class="inputs">
            <input type="file" id="upfile" name="file" placeholder=""/>
        </div>
        <div class="geshi">
            <button onclick="importExp();">导入</button>
            <span>格式：.xls/xlsx</span>
        </div>
    </div>
</div>
<div class="panel admin-panel">
    <div class="panel-head"><strong><span class="icon-pencil-square-o"></span>佐证信息审核统计</strong><!--<a href="addIndustryPovery.html" class="button border-main icon-plus-square-o">添加内容</a>-->
       <!-- <input type="button" class="btn_orange" style="float: right;" name="" value="导出" id="export">-->
        <!--<input type="button" class="btn_orange" style="float: right;" name="" value="导入" id="import">-->
    </div>
    <div class="form-01">
        <p>数据筛选 <span class="pack_up">收起-</span></p>
        <div class="search searchs" style="display: block;">
            <div>
                <div class="form-group" style="width:36%;margin-right:4%">
                    <label for="">提交日期</label>
                    <input type="date" id="submitTimeA" style="width:130px;"><span style="display: inline-block;width:30px;height:0.5px;background: #c9d7e0;margin: 0 4px 3px;"></span><input type="date" id="submitTimeB" style="width:130px;">
                </div>
               <!-- <div class="form-group" style="width:36%">
                    <label for="">审核日期</label>
                    <input type="date" id="firstTimeA" style="width:130px;"><span style="display: inline-block;width:30px;height:0.5px;background: #c9d7e0;margin: 0 4px 3px;"></span><input type="date" id="firstTimeB" style="width:130px;">
                </div>
                <div class="form-group" style="width:36%;margin-right:4%">
                    <label for="">复审日期</label>
                    <input type="date" id="townTimeA" style="width:130px;"><span style="display: inline-block;width:30px;height:1px;background: #c9d7e0;margin: 0 4px 3px;"></span><input type="date" id="townTimeB" style="width:130px;">
                </div>-->
                <div class="form-group" style="width:36%">
                    <label for="">审核日期</label>
                    <input type="date" id="districtTimeA" style="width:130px;"><span style="display: inline-block;width:30px;height:1px;background: #c9d7e0;margin: 0 4px 3px;"></span><input type="date" id="districtTimeB" style="width:130px;">
                </div>
            </div>
            <!--<div style="overflow: hidden;">
                <div class="form-group">
                    <label for="">统计规则</label>
                    <select name="" id="">
                        <option value="户数">户数</option>
                        <option value="条数">条数</option>
                    </select>
                </div>
            </div>-->
            <div style="float: right;">
                <input type="button" class="btn_orange" style="float: right;" name="" value="查询" id="searchs">
                <input type="button" class="btn_blue" style="float: right;" name="" value="重置条件" id="reset">
            </div>
        </div>
        <p id="title">西安市</p>
        <div class="spinner" style="display: none;z-index: 999">
            <div class="spinner-container container1">
                <div class="circle1"></div>
                <div class="circle2"></div>
                <div class="circle3"></div>
                <div class="circle4"></div>
            </div>
            <div class="spinner-container container2">
                <div class="circle1"></div>
                <div class="circle2"></div>
                <div class="circle3"></div>
                <div class="circle4"></div>
            </div>
            <div class="spinner-container container3">
                <div class="circle1"></div>
                <div class="circle2"></div>
                <div class="circle3"></div>
                <div class="circle4"></div>
            </div>
        </div>
        <table id="formSubmit2" class="form-x" cellspacing="0" cellpadding="0">
            <!--渲染主体内容数据模块-->
            <!--<tr>西安市</tr>
            <tr>
                <th rowspan="2" style="vertical-align: middle;">序号</th>
                <th rowspan="2" style="vertical-align: middle;">区县名称</th>
                <th rowspan="2" style="vertical-align: middle;">提交总数</th>
                <th colspan="3">初审总数</th>
                <th colspan="3">复审总数</th>
                <th colspan="3">终审总数</th>
            </tr>
            <tr>
                <td>未通过</td>
                <td>已通过</td>
                <td>通过率</td>
                <td>未通过</td>
                <td>已通过</td>
                <td>通过率</td>
                <td>未通过</td>
                <td>已通过</td>
                <td>通过率</td>
            </tr>
            <tr>
                <td>1</td>
                <td>周至县</td>
                <td>10000</td>
                <td>1000</td>
                <td>1000</td>
                <td>100%</td>
                <td>1000</td>
                <td>1000</td>
                <td>100%</td>
                <td>1000</td>
                <td>1000</td>
                <td>100%</td>
            </tr>
            <tr>
                <td>2</td>
                <td>蓝田县</td>
                <td>10000</td>
                <td>1000</td>
                <td>1000</td>
                <td>100%</td>
                <td>1000</td>
                <td>1000</td>
                <td>100%</td>
                <td>1000</td>
                <td>1000</td>
                <td>100%</td>
            </tr>
            <tr>
                <td>3</td>
                <td>鄠邑区</td>
                <td>10000</td>
                <td>1000</td>
                <td>1000</td>
                <td>100%</td>
                <td>1000</td>
                <td>1000</td>
                <td>100%</td>
                <td>1000</td>
                <td>1000</td>
                <td>100%</td>
            </tr>
            <tr>
                <td>4</td>
                <td>灞桥区</td>
                <td>10000</td>
                <td>1000</td>
                <td>1000</td>
                <td>100%</td>
                <td>1000</td>
                <td>1000</td>
                <td>100%</td>
                <td>1000</td>
                <td>1000</td>
                <td>100%</td>
            </tr>
            <tr>
                <td>5</td>
                <td>高陵区</td>
                <td>10000</td>
                <td>1000</td>
                <td>1000</td>
                <td>100%</td>
                <td>1000</td>
                <td>1000</td>
                <td>100%</td>
                <td>1000</td>
                <td>1000</td>
                <td>100%</td>
            </tr>
            <tr>
                <td>6</td>
                <td>长安区</td>
                <td>10000</td>
                <td>1000</td>
                <td>1000</td>
                <td>100%</td>
                <td>1000</td>
                <td>1000</td>
                <td>100%</td>
                <td>1000</td>
                <td>1000</td>
                <td>100%</td>
            </tr>
            <tr>
                <td>7</td>
                <td>国际港务区</td>
                <td>10000</td>
                <td>1000</td>
                <td>1000</td>
                <td>100%</td>
                <td>1000</td>
                <td>1000</td>
                <td>100%</td>
                <td>1000</td>
                <td>1000</td>
                <td>100%</td>
            </tr>-->
        </table>
        <div class="pages">
            <div class="paging">
                <div id="Pagination"></div>
                <div class="searchPage">
                    <span class="page-sum"></span>
                    <span id="allTotal"></span>
                </div>
            </div>
        </div>
    </div>
</div>

<!--详情页-->
<div style="width: 95%;height: auto;border: 1px solid #d9d9d9;margin: 0 auto; display: none;position: absolute;top: 150px;left: 35px;z-index: 10;background: white;" class="xiangqing">
    <div class="tab-wrapper" style="margin:0;">
        <p style="background: #1797f6;height: 40px;line-height:40px;color: white;text-align: center;font-size:18px;">贫困户数据管理详情<span class="xqclose" style="float: right;padding-right: 10px;cursor:pointer;">X</span></p>
        <div class="tab-content" style="min-height:422px;border-top: 1px solid #d9d9d9;">
            <div>
                <table border="1" cellspacing="0" cellpadding="0">
                    <tr style="font-size: 14px;">
                        <th class="table-bg">修改类别</th>
                        <th class="table-bg">修改指标</th>
                        <th class="table-bg">提交人姓名</th>
                        <th class="table-bg">提交人联系电话</th>
                        <th class="table-bg">提交时间</th>
                        <th class="table-bg">提交人所在单位</th>
                        <th class="table-bg">第一书记确认审核</th>
                        <th class="table-bg">镇街扶贫办审核</th>
                        <th class="table-bg">区县扶贫办审核</th>
                    </tr>
                    <tr>
                        <td>收入信息</td>
                        <td>耕地面积</td>
                        <td>刘轩</td>
                        <td>16619859605</td>
                        <td>2018-8-31 12:00:00</td>
                        <td>西安市扶贫办</td>
                        <td>已通过<br><span>2018-8-31 12:00:00</span></td>
                        <td>未通过<br><span>2018-8-31 12:00:00</span></td>
                        <td>未通过<br><span>2018-8-31 12:00:00</span></td>
                    </tr>
                    <tr>
                        <td>收入信息</td>
                        <td>耕地面积</td>
                        <td>刘轩</td>
                        <td>16619859605</td>
                        <td>2018-8-31 12:00:00</td>
                        <td>西安市扶贫办</td>
                        <td>已通过<br><span>2018-8-31 12:00:00</span></td>
                        <td>未通过<br><span>2018-8-31 12:00:00</span></td>
                        <td>未通过<br><span>2018-8-31 12:00:00</span></td>
                    </tr>
                    <tr>
                        <td>收入信息</td>
                        <td>耕地面积</td>
                        <td>刘轩</td>
                        <td>16619859605</td>
                        <td>2018-8-31 12:00:00</td>
                        <td>西安市扶贫办</td>
                        <td>已通过<br><span>2018-8-31 12:00:00</span></td>
                        <td>未通过<br><span>2018-8-31 12:00:00</span></td>
                        <td>未通过<br><span>2018-8-31 12:00:00</span></td>
                    </tr>
                    <tr>
                        <td>收入信息</td>
                        <td>耕地面积</td>
                        <td>刘轩</td>
                        <td>16619859605</td>
                        <td>2018-8-31 12:00:00</td>
                        <td>西安市扶贫办</td>
                        <td>已通过<br><span>2018-8-31 12:00:00</span></td>
                        <td>未通过<br><span>2018-8-31 12:00:00</span></td>
                        <td>未通过<br><span>2018-8-31 12:00:00</span></td>
                    </tr>
                    <tr>
                        <td>收入信息</td>
                        <td>耕地面积</td>
                        <td>刘轩</td>
                        <td>16619859605</td>
                        <td>2018-8-31 12:00:00</td>
                        <td>西安市扶贫办</td>
                        <td>已通过<br><span>2018-8-31 12:00:00</span></td>
                        <td>未通过<br><span>2018-8-31 12:00:00</span></td>
                        <td>未通过<br><span>2018-8-31 12:00:00</span></td>
                    </tr>

                </table>
            </div>
        </div>
    </div>
</div>
<script>
    /*筛选条件收起展开*/
    $(".pack_up").click(function(){
        $(".search").toggle();
        $(".pack_up").text($(".pack_up").text()=="高级查询+"?"收起-":"高级查询+");
    })
    $(".tuopin dl >dt:nth-child(2)").nextAll().click(function(){
        $(".tuopin dl >dt:nth-child(2)").removeClass("active");
        $(this).toggleClass("active");
        //给点击对象添加类
    });
    $(".tuopin dl >dt:nth-child(2)").click(function(){
        $(this).toggleClass("active")
        $(this).siblings().removeClass('active');
    })
    $(".shuxing dl >dt:nth-child(2)").nextAll().click(function(){
        $(".shuxing dl >dt:nth-child(2)").removeClass("active");
        $(this).toggleClass("active");
        //给点击对象添加类
    });
    $(".shuxing dl >dt:nth-child(2)").click(function(){
        $(this).toggleClass("active")
        $(this).siblings().removeClass('active');
    })
    $(".reason dl >dt:nth-child(2)").nextAll().click(function(){
        $(".reason dl >dt:nth-child(2)").removeClass("active");
        $(this).toggleClass("active");
        //给点击对象添加类
    });
    $(".reason dl >dt:nth-child(2)").click(function(){
        $(this).toggleClass("active")
        $(this).siblings().removeClass('active');
    })
    $(".xqclick").click(function(){
        $(".xiangqing").show(1000)
    })
    $(".xqclose").click(function(){
        $(".xiangqing").hide(1000)
    })
</script>
<script>
    $(document).ready(function(){
        var url=config.url;
        /*区划选择渲染*/
        let county=$("#country");
        let township=$("#township");
        let cunship=$("#village");
        let years=$("#year");
        /*页面初始化调用*/
        let obj=JSON.parse($.cookie('loginMessage'));
        let aar008=obj.aar008;
        tianqu();
        county.change(function(){
            tianzhen();
            tiancun();
        })
        township.change(function(){
            tiancun();
        })
        /*页面初始化接口*/
        function tianqu(){
            $.ajax({
                url: url+"/background/helpmeasures/industry/init",
                data:{"aar008":aar008},
                async:false,
                method:"post",
                type:"json",
                success:function(data){
                    if(data.code === 2000){
                        // showCounty(county,data.data.area);  //行政区划
                        showYear(years,data.data.year)   //年份
                        let type=data.data.type;
                        if(type==1){
                            showCounty(county,data.data.area);
                        }else if(type==2){
                            showFixed(county,data.data.q);
                            tianzhen();
                        }else if(type==3){
                            showFixed(county,data.data.q);
                            showFixed(township,data.data.x);
                            tiancun();
                        }else if(type==4){
                            showFixed(county,data.data.q);
                            showFixed(township,data.data.x);
                            showFixed(cunship,data.data.c);
                        }
                    }
                }
            })
        }
        /*镇/街道渲染接口*/
        function tianzhen(){
            var countyName=$("#country").val();
            $.ajax({
                url: url+"/background/helpmeasures/common/arealist",
                data:{"aaa113":countyName},
                async:false,
                method:"post",
                type:"json",
                success:function(data){
                    if(data.code === 2000){
                        // console.log(data);
                        showCounty2(township,data.data);
                    }
                }
            })
        }
        /*村渲染接口*/
        function tiancun(){
            var townName=$("#township").val();
            // console.log(townName)
            $.ajax({
                url: url+"/background/helpmeasures/common/arealist",
                data:{"aaa113":townName},
                async:false,
                method:"post",
                type:"json",
                success:function(data){
                    if(data.code === 2000){
                        showCounty3(cunship,data.data);
                    }
                }
            })
        }
        /*行政区划渲染函数*/
        function showCounty(obj,data){
            obj.empty();
            let str=`<option value="">县（区）</option>`;
            for(let i=0;i<data.length;i++){
                str+=`
                 <option value="${data[i]['AAR008']}">${data[i]['AAR009']}</option>
                `;
            }
            obj.html(function(i,value){
                return value+str;
            })
        }
        function showCounty2(obj,data){
            obj.empty();
            let str=`<option value="">乡（镇）</option>`;
            for(let i=0;i<data.length;i++){
                str+=`
                 <option value="${data[i]['AAR008']}">${data[i]['AAR009']}</option>
                `;
            }
            obj.html(function(i,value){
                return value+str;
            })
        }
        function showCounty3(obj,data){
            obj.empty();
            let str=`<option value="">村</option>`;
            for(let i=0;i<data.length;i++){
                str+=`
                 <option value="${data[i]['AAR008']}">${data[i]['AAR009']}</option>
                `;
            }
            obj.html(function(i,value){
                return value+str;
            })
        }
        function showFixed(obj,data){
            obj.empty();
            let str=`
                 <option value="${data.AAR008}">${data.AAR009}</option>
                `;
            obj.html(str);
        }
        /*年份渲染函数*/
        function showYear(obj,data){
            obj.empty();
            let str=``;
            for(let i=0;i<data.length;i++){
                str+=`
                 <option value="${data[i]}">${data[i]}</option>
                `;
            }
            obj.html(function(i,value){
                return value+str;
            })
        }
        ///////////////////////////////////////////////////////////
        let formList=$("#formSubmit2");
        let loginMessage=$.cookie("loginMessage");
        let loginCode=JSON.parse(loginMessage).aar008;
        if(loginCode.endsWith("00000000")){
            var dataCode={"jzfp":loginCode}
        }else if(loginCode.endsWith("000000")){
            var dataCode={"dis":loginCode}
        }else if(loginCode.endsWith("000")){
            var dataCode={"town":loginCode}
        }
        // let datas={"jzfp":1};
        // let datas2=JSON.stringify(datas);
        let token=$.cookie("token");
        var totle;
        $.ajax({
            url: url+"/info/evidence/analysis",
            data:dataCode,
            beforeSend:function(request){
                request.setRequestHeader("Authorization",token);
                request.setRequestHeader("X-Requested-With","XMLHttpRequest");
                ShowLoading();
            },
            dataType: 'json',
            // crossDomain: true,
            method:"post",
            // contentType:"application/json",
            success:function(data){
                console.log(data.data)
                if(data.code === 2000){
                    if(loginCode.endsWith("00000000")){
                        showList(formList,data.data);
                    }else if(loginCode.endsWith("000000")){
                        showList2(formList,data.data);
                    }else if(loginCode.endsWith("000")){
                        showList3(formList,data.data);
                    }
                    for(let i=0;i<$("#formSubmit2 tr td").length;i++){
                        if($("#formSubmit2 tr td").eq(i).text()=="null" || $("#formSubmit2 tr td").eq(i).text()=="undefined" || $("#formSubmit2 tr td").eq(i).text()==undefined){
                            $("#formSubmit2 tr td").eq(i).text("");
                        }
                    }
                    /*$(".page-sum").text("共"+data.data.pages+"页");
                    $("#allTotal").text("总户数："+data.data.total);
                    totle=data.data.total;
                    showPage($(".searchPage"),data.data.total);*/
                }else if(data.code===4000){
                    alert(data.message);
                }
            },
            complete:function(){
                HideLoading();
            }
        })
        function ShowLoading() {
            $(".spinner").show();
        }
        function HideLoading() {
            $(".spinner").hide();
        }
        /*点击区县*/
        $(document).on("click",".countyname",function(){
            $("#title").html($("#title").html()+">"+$(this).text());
            let value=$(this).attr("value");
            let submitTimeA=$("#submitTimeA").val().replace(/-/g,"");
            let submitTimeB=$("#submitTimeB").val().replace(/-/g,"");
            /*let townTimeA=$("#townTimeA").val().replace(/-/g,"");
            let townTimeB=$("#townTimeB").val().replace(/-/g,"");*/
            let districtTimeA=$("#districtTimeA").val().replace(/-/g,"");
            let districtTimeB=$("#districtTimeB").val().replace(/-/g,"");
            let data={"dis":value,"submitTimeA":submitTimeA,"submitTimeB":submitTimeB,"disTimeA":districtTimeA,"disTimeB":districtTimeB};
            // let datas=JSON.stringify(data);
            function qukong(obj){
                for(var key in obj){
                    if(obj[key]==null || obj[key]==''){
                        console.log(obj[key]);
                        delete obj[key];
                    }
                }
                return obj;
            }
            let datas=qukong(data)
            /*主体内容渲染*/
            let formList=$("#formSubmit2");
            // $(formList).hide()
            $.ajax({
                url: url+"/info/evidence/analysis",
                data:datas,
                beforeSend:function(request){
                    request.setRequestHeader("Authorization",token);
                    request.setRequestHeader("X-Requested-With","XMLHttpRequest");
                    ShowLoading();
                },
                dataType:"json",
                method:"post",
                // contentType:"application/json",
                success:function(data){
                    if(data.code === 2000){
                        showList2(formList,data.data);
                        for(let i=0;i<$("#formSubmit2 tr td").length;i++){
                            if($("#formSubmit2 tr td").eq(i).text()=="null" || $("#formSubmit2 tr td").eq(i).text()=="undefined" || $("#formSubmit2 tr td").eq(i).text()==undefined){
                                $("#formSubmit2 tr td").eq(i).text("");
                            }
                        }
                        /* $(".page-sum").text("共"+data.data.pages+"页");
                         $("#allTotal").text("总户数："+data.data.total);
                         showPage($(".searchPage"),data.data.total);*/
                    }else if(data.code===4000){
                        alert(data.message);
                    }
                },
                complete:function(){
                    HideLoading();
                }
            })
        })
        /*点击镇街*/
        $(document).on("click",".townname",function(){
            $("#title").html($("#title").html()+">"+$(this).text());
            let value=$(this).attr("value");
            let submitTimeA=$("#submitTimeA").val().replace(/-/g,"");
            let submitTimeB=$("#submitTimeB").val().replace(/-/g,"");
            /*let townTimeA=$("#townTimeA").val().replace(/-/g,"");
            let townTimeB=$("#townTimeB").val().replace(/-/g,"");*/
            let districtTimeA=$("#districtTimeA").val().replace(/-/g,"");
            let districtTimeB=$("#districtTimeB").val().replace(/-/g,"");
            let data={"town":value,"submitTimeA":submitTimeA,"submitTimeB":submitTimeB,"districtTimeA":districtTimeA,"disTimeB":districtTimeB};
            // let datas=JSON.stringify(data);
            function qukong(obj){
                for(var key in obj){
                    if(obj[key]==null || obj[key]==''){
                        console.log(obj[key]);
                        delete obj[key];
                    }
                }
                return obj;
            }
            let datas=qukong(data)
            /*主体内容渲染*/
            let formList=$("#formSubmit2");
            $.ajax({
                url: url+"/info/evidence/analysis",
                data:datas,
                beforeSend:function(request){
                    request.setRequestHeader("Authorization",token);
                    request.setRequestHeader("X-Requested-With","XMLHttpRequest");
                },
                dataType:"json",
                method:"post",
                // contentType:"application/json",
                success:function(data){
                    if(data.code === 2000){
                        showList3(formList,data.data);
                        for(let i=0;i<$("#formSubmit2 tr td").length;i++){
                            if($("#formSubmit2 tr td").eq(i).text()=="null" || $("#formSubmit2 tr td").eq(i).text()=="undefined" || $("#formSubmit2 tr td").eq(i).text()==undefined){
                                $("#formSubmit2 tr td").eq(i).text("");
                            }
                        }
                        /* $(".page-sum").text("共"+data.data.pages+"页");
                         $("#allTotal").text("总户数："+data.data.total);
                         showPage($(".searchPage"),data.data.total);*/
                    }else if(data.code===4000){
                        alert(data.message);
                    }
                }
            })
        })
        /*点击进行查询*/
        $("#searchs").click(function(){
            /*查询条件*/
            /*必需*/
            // let pageNum=$(".allPage").text();
            /*let pageSize=12;
            let year=$("#year").val();*/
            let submitTimeA=$("#submitTimeA").val().replace(/-/g,"");
            let submitTimeB=$("#submitTimeB").val().replace(/-/g,"");
           /* let firstTimeA=$("#firstTimeA").val().replace(/-/g,"");
            let firstTimeB=$("#firstTimeB").val().replace(/-/g,"");
            let townTimeA=$("#townTimeA").val().replace(/-/g,"");
            let townTimeB=$("#townTimeB").val().replace(/-/g,"");*/
            let districtTimeA=$("#districtTimeA").val().replace(/-/g,"");
            let districtTimeB=$("#districtTimeB").val().replace(/-/g,"");

            if(submitTimeA>submitTimeB && submitTimeA!="" && submitTimeB!=""){
                alert("提交日期的起始时间不能大于结束时间");
                return false;
            }
           /* if(firstTimeA>firstTimeB && firstTimeA!="" && firstTimeB!=""){
                alert("初审日期的起始时间不能大于结束时间");
                return false;
            }
            if(townTimeA>townTimeB && townTimeA!="" && townTimeB!==""){
                alert("复审日期的起始时间不能大于结束时间");
                return false;
            }*/
            if(districtTimeA>districtTimeB && districtTimeA!="" && districtTimeB!==""){
                alert("终审日期的起始时间不能大于结束时间");
                return false;
            }
            if(loginCode.endsWith("00000000")){
                var datacode={"jzfp":loginCode,"submitTimeA":submitTimeA,"submitTimeB":submitTimeB,"disTimeA":districtTimeA,"disTimeB":districtTimeB};
            }else if(loginCode.endsWith("000000")){
                var datacode={"dis":loginCode,"submitTimeA":submitTimeA,"submitTimeB":submitTimeB,"disTimeA":districtTimeA,"disTimeB":districtTimeB};
            }else if(loginCode.endsWith("000")){
                var datacode={"town":loginCode,"submitTimeA":submitTimeA,"submitTimeB":submitTimeB,"disTimeA":districtTimeA,"disTimeB":districtTimeB};
            }

            // let datas=JSON.stringify(data);
            function qukong(obj){
                for(var key in obj){
                    if(obj[key]==null || obj[key]==''){
                        console.log(obj[key]);
                        delete obj[key];
                    }
                }
                return obj;
            }
            let datas=qukong(datacode)
            /*主体内容渲染*/
            let formList=$("#formSubmit2");
            $.ajax({
                url: url+"/info/evidence/analysis",
                data:datas,
                beforeSend:function(request){
                    request.setRequestHeader("Authorization",token);
                    request.setRequestHeader("X-Requested-With","XMLHttpRequest");
                },
                dataType:"json",
                method:"post",
                async:false,
                // contentType:"application/json",
                success:function(data){
                    if(data.code === 2000){
                        showList(formList,data.data);
                        for(let i=0;i<$("#formSubmit2 tr td").length;i++){
                            if($("#formSubmit2 tr td").eq(i).text()=="null" || $("#formSubmit2 tr td").eq(i).text()=="undefined" || $("#formSubmit2 tr td").eq(i).text()==undefined){
                                $("#formSubmit2 tr td").eq(i).text("");
                            }
                        }
                        /*$(".page-sum").text("共"+data.data.pages+"页");
                        $("#allTotal").text("总户数："+data.data.total);
                        showPage($(".searchPage"),data.data.total);*/
                    }else if(data.code===4000){
                        alert(data.message);
                    }
                }
            })
        })
        /*分页*/
        let indexs;
        ////////////////////////////////////////////////////////////////////////////////////////////////////////////////
        function page_init(index) {
            let pageSize=12;
            // let year=$("#year").val();
            let year="201806";
            let property=[];
            let status=[];
            let reason=[];
            let propertys=$(".shuxing dl dt.active");
            let statuss=$(".tuopin dl dt.active");
            let reasons=$(".reason dl dt.active");
            getValue(propertys,property);
            getValue(statuss,status);
            getValue(reasons,reason);
            /*获取选中筛选条件值*/
            function getValue(obj,arr){
                // let arr=[];
                for(let i=0;i<obj.length;i++){
                    arr.push(obj.eq(i).attr("abc"));
                }
                return arr;
            }
            /*非必需*/
            let q=$("#country").val();
            let x=$("#township").val();
            let c=$("#village").val();
            let n=$("#povertyName").val();
            let i=$("#idNumber").val();
            // console.log(property,status,reason);
            /*判断贫困户属性、脱贫状态、致贫原因等筛选条件*/
            if(property[0]==undefined){
                property=null;
            }
            if(status[0]==undefined){
                status=null;
            }
            if(reason[0]==undefined){
                reason=null;
            }
            indexs=index+1;
            let data={"pageNum":index+1,"pageSize":pageSize,"year":year,"q":q,"x":x,"c":c,"n":n,"i":i,"property":property,"status":status,"reason":reason};
            let datas=JSON.stringify(data);
            /*主体内容渲染*/
            let formList=$("#formSubmit2");
            $.ajax({
                url: url+"/background/helpmeasures/industry/query",
                data:datas,
                beforeSend:function(request){
                    request.setRequestHeader("Authorization",token);
                    request.setRequestHeader("X-Requested-With","XMLHttpRequest");
                },
                dataType:"json",
                method:"post",
                async:false,
                contentType:"application/json",
                success:function(data){
                    if(data.code === 2000){
                        // console.log(data);
                        showList(formList,data.data.list);
                        for(let i=0;i<$("#formSubmit2 tr td").length;i++){
                            if($("#formSubmit2 tr td").eq(i).text()=="null" || $("#formSubmit2 tr td").eq(i).text()=="undefined" || $("#formSubmit2 tr td").eq(i).text()==undefined){
                                $("#formSubmit2 tr td").eq(i).text("");
                            }
                        }
                        $(".page-sum").text("共"+data.data.pages+"页");
                        $("#allTotal").text("总户数："+data.data.total);
                    }else if(data.code===4000){
                        alert(data.message);
                    }
                }
            })
        }
        function showPage(obj,data){
            $("#Pagination").pagination(data,{
                callback:PageCallback,         //pageCallback() 为翻页调用函数
                items_per_page:12,                //每页显示条目数
                num_display_entries: 4,                //连续分页显示分页条目数
                num_edge_entries: 1,          //两侧显示的首尾分页的条目数
            });
        }
        //ajax分页请求,page_index :页码
        function PageCallback(page_index){
            page_init(page_index);      //第一页为0
        }
        /*导出*/
        $("#export").click(function(){
            /*查询条件*/
            let submitTimeA=$("#submitTimeA").val().replace(/-/g,"");
            let submitTimeB=$("#submitTimeB").val().replace(/-/g,"");
            let firstTimeA=$("#firstTimeA").val().replace(/-/g,"");
            let firstTimeB=$("#firstTimeB").val().replace(/-/g,"");
            let townTimeA=$("#townTimeA").val().replace(/-/g,"");
            let townTimeB=$("#townTimeB").val().replace(/-/g,"");
            let districtTimeA=$("#districtTimeA").val().replace(/-/g,"");
            let districtTimeB=$("#districtTimeB").val().replace(/-/g,"");
            if(loginCode.endsWith("00000000")){
                var data={"jzfp":loginCode,"submitTimeA":submitTimeA,"submitTimeB":submitTimeB,"firstTimeA":firstTimeA,"firstTimeB":firstTimeB,"townTimeA":townTimeA,"townTimeB":townTimeB,"districtTimeA":districtTimeA,"districtTimeB":districtTimeB};
            }else if(loginCode.endsWith("000000")){
                var data={"dis":loginCode,"submitTimeA":submitTimeA,"submitTimeB":submitTimeB,"firstTimeA":firstTimeA,"firstTimeB":firstTimeB,"townTimeA":townTimeA,"townTimeB":townTimeB,"districtTimeA":districtTimeA,"districtTimeB":districtTimeB};
            }else if(loginCode.endsWith("000")){
                var data={"town":loginCode,"submitTimeA":submitTimeA,"submitTimeB":submitTimeB,"firstTimeA":firstTimeA,"firstTimeB":firstTimeB,"townTimeA":townTimeA,"townTimeB":townTimeB,"districtTimeA":districtTimeA,"districtTimeB":districtTimeB};
            }
            function qukong(obj){
                for(var key in obj){
                    if(obj[key]==null || obj[key]=='' || obj[key]=="null"){
                        delete obj[key];
                    }
                }
                return obj;
            }
            var newmap=qukong(data);
            /*拼接*/
            let strs="";
            function pinjie(obj){
                for(let key in obj){
                    strs+=key+"="+obj[key]+"&";
                }
                return strs;
            }
            let a=pinjie(newmap)
            let b=a.substring(0,a.length-1);
            let cc=url+"/info/export/poverty/analysis?"+b;
            /*ajax校验导出权限*/
            $.ajax({
                url: url+"/info/export/poverty/analysis/exist",
                data:{},
                beforeSend:function(request){
                    request.setRequestHeader("Authorization",token);
                    request.setRequestHeader("X-Requested-With","XMLHttpRequest");
                },
                dataType:"json",
                method:"post",
                async:false,
                contentType:"application/json",
                success:function(data){
                    if(data.code === 2000){
                        window.location.href=cc;
                    }else if(data.code===4000){
                        alert(data.message);
                    }
                }
            })
        })
        /*根据输入的指定页数进行跳转*/
        /*$(".page-btn").click(function(){
            let pageSize=12;
            let pageNum=$("#currentPage").val();
            let year=$("#year").val();
            let property=[];
            let status=[];
            let reason=[];
            let propertys=$(".shuxing dl dt.active");
            let statuss=$(".tuopin dl dt.active");
            let reasons=$(".reason dl dt.active");
            getValue(propertys,property);
            getValue(statuss,status);
            getValue(reasons,reason);
            /!*获取选中筛选条件值*!/
            function getValue(obj,arr){
                // let arr=[];
                for(let i=0;i<obj.length;i++){
                    arr.push(obj.eq(i).attr("abc"));
                }
                return arr;
            }
            /!*非必需*!/
            let q=$("#country").val();
            let x=$("#township").val();
            let c=$("#village").val();
            let n=$("#povertyName").val();
            let i=$("#idNumber").val();
            // console.log(property,status,reason);
            /!*判断贫困户属性、脱贫状态、致贫原因等筛选条件*!/
            if(property[0]==undefined){
                property=null;
            }
            if(status[0]==undefined){
                status=null;
            }
            if(reason[0]==undefined){
                reason=null;
            }
            let data={"pageNum":pageNum,"pageSize":pageSize,"year":year,"q":q,"x":x,"c":c,"n":n,"i":i,"property":property,"status":status,"reason":reason};
            let datas=JSON.stringify(data);
            /!*主体内容渲染*!/
            let formList=$("#formSubmit2");
            $.ajax({
                url: url+"/background/helpmeasures/industry/query",
                data:datas,
                dataType:"json",
                method:"post",
                async:false,
                contentType:"application/json",
                success:function(data){
                    if(data.code === 2000){
                        // console.log(data);
                        showList(formList,data.data.list);
                        $(".allPage").text(data.data.pages);
                        showPage($(".searchPage"),data.data.total);
                    }
                }
            })
        })*/
        ////////////////////////////////////////////////////////////////////////////////////////////////////////////////
        function showList(obj,data){
            obj.empty();
            let str=`<tr>
              <th rowspan="2" style="vertical-align: middle;">区县名称</th>
              <th colspan="3" style="vertical-align: middle;">提交总数</th>
              <th colspan="3">审核总数</th>
          </tr>
          <tr>
              <td>提交户数</td>
              <td>佐证数量</td>
              <td>照片数量</td>
              <td>未通过</td>
              <td>已通过</td>
              <td>通过率</td>
          </tr>`;
            for(let i=0;i<data.length;i++){
                str+=`
                   <tr>
                      <td value="${data[i]['AAR001']}" class="countyname" style="cursor:pointer;color:#1483ff">${data[i]['AAR009']}</td>
                      <td>${data[i]['A1']}</td>
                      <td>${data[i]['A2']}</td>
                      <td>${data[i]['A3']}</td>
                      <td>${data[i]['B2']}</td>
                      <td>${data[i]['C2']}</td>
                      <td>${data[i]['dis']}</td>
                    </tr>
                `;
            }
            obj.html(function(i,value){
                return value+str;
            })
        }
        function showList2(obj,data){
            obj.empty();
            let str=`<tr>
              <th rowspan="2" style="vertical-align: middle;">镇街名称</th>
              <th colspan="3" style="vertical-align: middle;">提交总数</th>
              <th colspan="3">审核总数</th>
          </tr>
          <tr>
              <td>提交户数</td>
              <td>佐证数量</td>
              <td>照片数量</td>
              <td>未通过</td>
              <td>已通过</td>
              <td>通过率</td>
          </tr>`;
            for(let i=0;i<data.length;i++){
                str+=`
                   <tr>
                      <td value="${data[i]['AAR001']}" class="townname" style="cursor:pointer;color:#1483ff">${data[i]['AAR009']}</td>
                      <td>${data[i]['A1']}</td>
                      <td>${data[i]['A2']}</td>
                      <td>${data[i]['A3']}</td>
                      <td>${data[i]['B2']}</td>
                      <td>${data[i]['C2']}</td>
                      <td>${data[i]['dis']}</td>
                    </tr>
                `;
            }
            obj.html(function(i,value){
                return value+str;
            })
        }
        function showList3(obj,data){
            obj.empty();
            let str=`<tr>
              <th rowspan="2" style="vertical-align: middle;">村组名称</th>
              <th colspan="3" style="vertical-align: middle;">提交总数</th>
              <th colspan="3">审核总数</th>
          </tr>
          <tr>
              <td>提交户数</td>
              <td>佐证数量</td>
              <td>照片数量</td>
              <td>未通过</td>
              <td>已通过</td>
              <td>通过率</td>
          </tr>`;
            for(let i=0;i<data.length;i++){
                str+=`
                   <tr>
                      <td>${data[i]['AAR009']}</td>
                      <td>${data[i]['A1']}</td>
                      <td>${data[i]['A2']}</td>
                      <td>${data[i]['A3']}</td>
                      <td>${data[i]['B2']}</td>
                      <td>${data[i]['C2']}</td>
                      <td>${data[i]['dis']}</td>
                    </tr>
                `;
            }
            obj.html(function(i,value){
                return value+str;
            })
        }
        /*点击详情跳转详情页面*/
        $(document).on("click",".xqclick",function(){
            var value=$(this).attr("hrefs");
            localStorage.setItem("updateId",value);
            $(".xiangqing").show(1000);
            /*详情页面渲染*/
            $.ajax({
                url: url+"/background/helpmeasures/industry/detail",
                data:{"id":value},
                beforeSend:function(request){
                    request.setRequestHeader("Authorization",token);
                    request.setRequestHeader("X-Requested-With","XMLHttpRequest");
                },
                method:"post",
                type:"json",
                success:function(data){
                    if(data.code === 2000){
                        // console.log(data);
                        $("#A").text(data.data.A);
                        $("#B").text(data.data.B);
                        $("#C").text(data.data.C);
                        $("#D").text(data.data.D);
                        $("#E").text(data.data.E);
                        $("#F").text(data.data.F);
                        $("#G").text(data.data.G);
                        $("#H").text(data.data.H);
                        $("#I").text(data.data.I);
                        $("#J").text(data.data.J);
                        $("#K").text(data.data.L);
                        $("#L").text(data.data.K);
                        $("#M").text(data.data.M);
                        $("#N").text(data.data.N);
                        $("#O").text(data.data.O);
                        $("#P").text(data.data.P);
                        $("#Q").text(data.data.Q);
                        $("#R").text(data.data.R);
                        $("#S").text(data.data.S);
                        $("#T").text(data.data.T);
                        $("#U").text(data.data.U);
                        $("#V").text(data.data.V);
                        $("#W").text(data.data.W);
                        $("#X").text(data.data.X);
                        $("#Y").text(data.data.Y);
                        $("#Z").text(data.data.Z);
                        $("#AA").text(data.data.AA);
                        $("#BB").text(data.data.BB);
                        $("#CC").text(data.data.CC);
                        $("#DD").text(data.data.DD);
                        $("#EE").text(data.data.EE);
                        $("#FF").text(data.data.FF);
                        $("#GG").text(data.data.GG);
                        $("#HH").text(data.data.HH);
                        $("#II").text(data.data.II);
                        $("#JJ").text(data.data.JJ);
                        $("#KK").text(data.data.KK);
                        $("#LL").text(data.data.LL);
                        $("#MM").text(data.data.MM);
                        $("#NN").text(data.data.NN);
                        $("#YY").text(data.data.YY);
                        for(let i=0;i<$(".tab-content tr td").length;i++){
                            if($(".tab-content tr td").eq(i).text()=="null" || $(".tab-content tr td").eq(i).text()=="undefined" || $(".tab-content tr td").eq(i).text()==undefined){
                                $(".tab-content tr td").eq(i).text("");
                            }
                        }
                    }else if(data.code===4000){
                        alert(data.message);
                    }
                }
            })
        })
        $(".xqclose").click(function(){
            $(".xiangqing").hide(1000);
        })
        /*点击进入修改页面*/
        $(document).on("click",".update",function(){
            var updateId=$(this).attr("hrefs");
            localStorage.setItem("updateId",updateId);
            localStorage.setItem("year",$("#year").val());
            location.href="updateIndustryPovery.html";
        })
    })
</script>
<script>
    /*分页插件初始化*/
    $(document).ready(function(){
        let pageNum=$(".allPage").text();
        $("#Pagination").pagination(pageNum);
    })
    /*function page_init(index) {
        var p_name=$("#p_name").val();
        if(p_name==""||p_name==null){
            p_name=null;
        }
        var p_year=$("#p_year").val();
        var p_number=$("#p_number").val();
        var p_shuxing=$("#p_shuxing").val();
        var p_status=$("#p_status").val();  //状态
        var p_biaozhun=$("#p_biaozhun").val(); //标准
        var p_xiang=$("#p_xiang").val();  //乡
        var p_cun =$("#p_cun").val();
        var p_qv=$("#p_qv").val();  //区
        if(p_cun!="" && p_cun!=null){
            p_xiang=p_cun;
        }
        console.log("data:"+p_year);
        $.ajax({
            url:url + "pkh/query",
            type:"get",
            data:{"page_index": index+1,"page_size": 12,"aab002":p_name,
                "aar040":p_year,"aab004":p_number,"aac006":p_shuxing,"aar010":p_status,
                "aac005":p_biaozhun,"aar008":p_qv,"aar001":p_xiang},
            dataType:"json",
            success:function (data) {
                if (data.code == 2000){
                    console.log("ok");
                    showAllPoorInfo( index,formInfos,data);
                }
            },
            error:function () {
            }
        })
    }
    function showPage(obj,data){
        $("#Pagination").pagination(data,{
            callback:PageCallback,         //pageCallback() 为翻页调用函数
            items_per_page:12,                //每页显示条目数
            num_display_entries: 4,                //连续分页显示分页条目数
            num_edge_entries: 1          //两侧显示的首尾分页的条目数
        });
    }
    //ajax分页请求,page_index :页码
    function PageCallback(page_index,jq){
        // console.log('das');
        page_init(page_index);      //第一页为0
    }*/
</script>
<script type="text/javascript">
    /*导入excel文件*/
    let token=$.cookie("token");
    let url=config.url;
    $("#import").click(function(){
        $(".pop-up").css("display","block");
    })
    $(".closes").click(function(){
        $(".pop-up").hide();
    })
    function importExp() {
        var formData = new FormData();
        var name = $("#upfile").val();
        formData.append("file",$("#upfile")[0].files[0]);
        formData.append("file",name);
        $.ajax({
            url : url+"/background/helpmeasures/industry/excel/import",
            type : 'POST',
            async : false,
            beforeSend:function(request){
                request.setRequestHeader("Authorization",token);
                request.setRequestHeader("X-Requested-With","XMLHttpRequest");
            },
            data : formData,
            // 告诉jQuery不要去处理发送的数据
            processData : false,
            // 告诉jQuery不要去设置Content-Type请求头
            contentType : false,
            beforeSend:function(){

            },
            success : function(data) {
                if(data.code===2000){
                    alert("导入成功");
                }else if(data.code===1009){
                    alert("导入失败");
                }else if(data.code===4000){
                    alert(data.message);
                }
            }
        });
    }
</script>
</body>
</html>